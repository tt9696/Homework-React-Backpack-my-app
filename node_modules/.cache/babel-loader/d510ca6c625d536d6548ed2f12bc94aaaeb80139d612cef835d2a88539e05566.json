{"ast":null,"code":"/*\n * Backpack - Skyscanner's Design System\n *\n * Copyright 2016 Skyscanner Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Component } from 'react';\nimport { withButtonAlignment } from \"../../bpk-component-icon\";\nimport ClearIcon from \"../../bpk-component-icon/sm/close-circle\";\nimport { cssModules } from \"../../bpk-react-utils\";\nimport { CLEAR_BUTTON_MODES, defaultProps } from \"./common-types\";\nimport STYLES from \"./BpkInput.module.css\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nconst getClassName = cssModules(STYLES);\nconst ClearButtonIcon = withButtonAlignment(ClearIcon);\nclass BpkInput extends Component {\n  static defaultProps = defaultProps;\n  constructor(props) {\n    super(props);\n    this.state = {\n      persistClearButton: false\n    };\n  }\n  render() {\n    const classNames = [getClassName('bpk-input')];\n    const containerClassNames = [getClassName('bpk-input__container')];\n    const clearButtonClassNames = [getClassName('bpk-input__clear-button')];\n    const {\n      className,\n      clearButtonLabel,\n      clearButtonMode,\n      docked,\n      dockedFirst,\n      dockedLast,\n      dockedMiddle,\n      inputRef,\n      large,\n      name,\n      onClear,\n      valid,\n      value,\n      ...rest\n    } = this.props;\n\n    // Used as a ref for focussing the input when cleared.\n    let ref = null;\n\n    // Explicit check for false primitive value as undefined is\n    // treated as neither valid nor invalid\n    const isInvalid = valid === false;\n    const clearable = clearButtonMode && clearButtonMode !== CLEAR_BUTTON_MODES.never;\n    if (valid) {\n      classNames.push(getClassName('bpk-input--valid'));\n    } else if (isInvalid) {\n      classNames.push(getClassName('bpk-input--invalid'));\n    }\n    if (large) {\n      classNames.push(getClassName('bpk-input--large'));\n      clearButtonClassNames.push(getClassName('bpk-input__clear-button--large'));\n    }\n    if (clearable) {\n      classNames.push(getClassName('bpk-input--clearable'));\n      if (clearButtonMode === CLEAR_BUTTON_MODES.always || this.state.persistClearButton) {\n        classNames.push(getClassName('bpk-input--persistent-clearable'));\n        clearButtonClassNames.push(getClassName('bpk-input__clear-button--persistent'));\n      }\n    }\n    if (docked) {\n      classNames.push(getClassName('bpk-input--docked'));\n    }\n    if (dockedFirst) {\n      classNames.push(getClassName('bpk-input--docked-first'));\n    }\n    if (dockedMiddle) {\n      classNames.push(getClassName('bpk-input--docked-middle'));\n    }\n    if (dockedLast) {\n      classNames.push(getClassName('bpk-input--docked-last'));\n    }\n    if (className) {\n      if (clearable) {\n        containerClassNames.push(className);\n      } else {\n        classNames.push(className);\n      }\n    }\n    const renderedInput = /*#__PURE__*/_jsx(\"input\", {\n      className: classNames.join(' '),\n      ref: input => {\n        ref = input;\n        if (inputRef) {\n          inputRef(input);\n        }\n      },\n      \"aria-invalid\": isInvalid,\n      value: value,\n      name: name,\n      ...rest\n    });\n\n    // When we mouseDown, we should persist the clear button.\n    // If we don't do this, then for `clearableWhileEditing` mode the mouseDown on the button will cause the input to lose focus,\n    // which will hide the button. The `onClick` event cannot complete if the button is removed from the DOM but mouseUp!\n    const onMouseDown = () => {\n      this.setState({\n        persistClearButton: true\n      });\n    };\n    return clearable ? /*#__PURE__*/_jsxs(\"div\", {\n      className: containerClassNames.join(' '),\n      children: [renderedInput, value.length > 0 && /*#__PURE__*/_jsx(\"button\", {\n        type: \"button\",\n        title: clearButtonLabel || '',\n        \"aria-label\": clearButtonLabel || '',\n        tabIndex: -1,\n        onMouseDown: onMouseDown,\n        onClick: e => {\n          if (ref) {\n            ref.focus();\n          }\n          if (onClear) {\n            if (e.target instanceof HTMLButtonElement) {\n              const {\n                target\n              } = e;\n              target.name = name;\n            }\n            onClear(e);\n            this.setState({\n              persistClearButton: false\n            });\n          }\n        },\n        className: clearButtonClassNames.join(' '),\n        children: /*#__PURE__*/_jsx(ClearButtonIcon, {\n          focusable: \"false\" // prevents focus on IE11\n          ,\n\n          fill: \"currentcolor\"\n        })\n      })]\n    }) : renderedInput;\n  }\n}\nexport default BpkInput;","map":{"version":3,"names":["Component","withButtonAlignment","ClearIcon","cssModules","CLEAR_BUTTON_MODES","defaultProps","STYLES","jsx","_jsx","jsxs","_jsxs","getClassName","ClearButtonIcon","BpkInput","constructor","props","state","persistClearButton","render","classNames","containerClassNames","clearButtonClassNames","className","clearButtonLabel","clearButtonMode","docked","dockedFirst","dockedLast","dockedMiddle","inputRef","large","name","onClear","valid","value","rest","ref","isInvalid","clearable","never","push","always","renderedInput","join","input","onMouseDown","setState","children","length","type","title","tabIndex","onClick","e","focus","target","HTMLButtonElement","focusable","fill"],"sources":["C:/Users/Dell/my-app/node_modules/@skyscanner/backpack-web/bpk-component-input/src/BpkInput.js"],"sourcesContent":["/*\n * Backpack - Skyscanner's Design System\n *\n * Copyright 2016 Skyscanner Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Component } from 'react';\nimport { withButtonAlignment } from \"../../bpk-component-icon\";\nimport ClearIcon from \"../../bpk-component-icon/sm/close-circle\";\nimport { cssModules } from \"../../bpk-react-utils\";\nimport { CLEAR_BUTTON_MODES, defaultProps } from \"./common-types\";\nimport STYLES from \"./BpkInput.module.css\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nconst getClassName = cssModules(STYLES);\nconst ClearButtonIcon = withButtonAlignment(ClearIcon);\nclass BpkInput extends Component {\n  static defaultProps = defaultProps;\n  constructor(props) {\n    super(props);\n    this.state = {\n      persistClearButton: false\n    };\n  }\n  render() {\n    const classNames = [getClassName('bpk-input')];\n    const containerClassNames = [getClassName('bpk-input__container')];\n    const clearButtonClassNames = [getClassName('bpk-input__clear-button')];\n    const {\n      className,\n      clearButtonLabel,\n      clearButtonMode,\n      docked,\n      dockedFirst,\n      dockedLast,\n      dockedMiddle,\n      inputRef,\n      large,\n      name,\n      onClear,\n      valid,\n      value,\n      ...rest\n    } = this.props;\n\n    // Used as a ref for focussing the input when cleared.\n    let ref = null;\n\n    // Explicit check for false primitive value as undefined is\n    // treated as neither valid nor invalid\n    const isInvalid = valid === false;\n    const clearable = clearButtonMode && clearButtonMode !== CLEAR_BUTTON_MODES.never;\n    if (valid) {\n      classNames.push(getClassName('bpk-input--valid'));\n    } else if (isInvalid) {\n      classNames.push(getClassName('bpk-input--invalid'));\n    }\n    if (large) {\n      classNames.push(getClassName('bpk-input--large'));\n      clearButtonClassNames.push(getClassName('bpk-input__clear-button--large'));\n    }\n    if (clearable) {\n      classNames.push(getClassName('bpk-input--clearable'));\n      if (clearButtonMode === CLEAR_BUTTON_MODES.always || this.state.persistClearButton) {\n        classNames.push(getClassName('bpk-input--persistent-clearable'));\n        clearButtonClassNames.push(getClassName('bpk-input__clear-button--persistent'));\n      }\n    }\n    if (docked) {\n      classNames.push(getClassName('bpk-input--docked'));\n    }\n    if (dockedFirst) {\n      classNames.push(getClassName('bpk-input--docked-first'));\n    }\n    if (dockedMiddle) {\n      classNames.push(getClassName('bpk-input--docked-middle'));\n    }\n    if (dockedLast) {\n      classNames.push(getClassName('bpk-input--docked-last'));\n    }\n    if (className) {\n      if (clearable) {\n        containerClassNames.push(className);\n      } else {\n        classNames.push(className);\n      }\n    }\n    const renderedInput = /*#__PURE__*/_jsx(\"input\", {\n      className: classNames.join(' '),\n      ref: input => {\n        ref = input;\n        if (inputRef) {\n          inputRef(input);\n        }\n      },\n      \"aria-invalid\": isInvalid,\n      value: value,\n      name: name,\n      ...rest\n    });\n\n    // When we mouseDown, we should persist the clear button.\n    // If we don't do this, then for `clearableWhileEditing` mode the mouseDown on the button will cause the input to lose focus,\n    // which will hide the button. The `onClick` event cannot complete if the button is removed from the DOM but mouseUp!\n    const onMouseDown = () => {\n      this.setState({\n        persistClearButton: true\n      });\n    };\n    return clearable ? /*#__PURE__*/_jsxs(\"div\", {\n      className: containerClassNames.join(' '),\n      children: [renderedInput, value.length > 0 && /*#__PURE__*/_jsx(\"button\", {\n        type: \"button\",\n        title: clearButtonLabel || '',\n        \"aria-label\": clearButtonLabel || '',\n        tabIndex: -1,\n        onMouseDown: onMouseDown,\n        onClick: e => {\n          if (ref) {\n            ref.focus();\n          }\n          if (onClear) {\n            if (e.target instanceof HTMLButtonElement) {\n              const {\n                target\n              } = e;\n              target.name = name;\n            }\n            onClear(e);\n            this.setState({\n              persistClearButton: false\n            });\n          }\n        },\n        className: clearButtonClassNames.join(' '),\n        children: /*#__PURE__*/_jsx(ClearButtonIcon, {\n          focusable: \"false\" // prevents focus on IE11\n          ,\n          fill: \"currentcolor\"\n        })\n      })]\n    }) : renderedInput;\n  }\n}\nexport default BpkInput;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}